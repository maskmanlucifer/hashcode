<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="/css/index.css">
    <title>hashcode</title>
</head>
<body>
    <nav class="navbar">
        <ul class="navbar-nav">
            <li>
                <a href="#">
                    <i class="material-icons">tag</i>
                </a>
                <span class="tooltip">HASHCODE</span>
            </li>
            <li>
                <a href="/">
                    <i class="material-icons">home</i>
                </a>
                <span class="tooltip">HOMEPAGE</span>
            </li>
            <li>
                <a href="/fizz">
                    <i class="material-icons">code</i>
                </a>
                <span class="tooltip">FIZZBUZZ</span>
            </li>
            <li>
                <a href="/contest">
                    <i class="material-icons">emoji_objects</i>
                </a>
                <span class="tooltip">CONTESTS</span>
            </li> 
            <li>
                <a href="#">
                    <i class="material-icons">assessment</i>
                </a>
                <span class="tooltip">VISUALIZER</span>
            </li>
            <%if(user){%>
            <li>
                <a href="/profile">
                    <i class="material-icons">account_circle</i>
                </a>
                <span class="tooltip">PROFILE</span>
            </li>
            <li>
                <a href="/logout">
                    <i class="material-icons">logout</i>
                </a>
                <span class="tooltip">LOGOUT</span>
            </li>
            <%} else {%>
            <li>
                <a href="/google">
                    <i class="material-icons">login</i>
                </a>
                <span class="tooltip">LOGIN</span>
            </li>
            <%}%>
            
            <li>
                <a href="https://github.com/maskmanlucifer/hashcode">
                    <i class="material-icons">view_in_ar</i>
                </a>
                <span class="tooltip">SOURCE CODE</span>
            </li>
        </ul>
    </nav>
    <main class="main">
       <div class="big-box">
           <div class="filter_bar_visualizer">
            <span>VISUALIZER</span>
           </div>
           
 
            <div class="card_list">
            <span>CONTEST</span>
            <input type="number" placeholder="ENTER CONTEST NO." id="contest_no">
            <button class="contest_button">GO</button>
            <div class="contestError"></div>
            <div class="info">
                <p>Bar graph of how many users of level x solved particular problem</p>
                <p>Seperate bar graph for each problem</p>
                <p>Contest no. can be found in url of that contest</p>
            </div>
            </div>

            <div class="card_list">
                <span>PROFILE</span>
                <div class="info">
                    <p>(Bar , Doughnut etc.) Graphs for almost everything about your profile</p>
                    <p>Comparing two users profile</p>
                </div>
                <button><a href="https://cfviz.netlify.app/">CFVIZ</a></button>
           </div>
       </div>
    </main>
    <script>
        let contestError = document.querySelector('.contestError');
        
        $('.contest_button').click((e)=>{
            e.preventDefault();
            contestError.textContent='';
            let contestNumber = document.getElementById('contest_no').value;
            let uri = `https://codeforces.com/api/contest.standings?contestId=${contestNumber}&from=1&count=1`;
            fetch(uri)
            .then((res)=>{
                return res.json();
            })
            .then((data)=>{
                console.log(data);
               if(data.status !== "OK") {
                  contestError.textContent = "Contest does not exist";
               } else {
                   let uri1 = "/visualizer/contest/"+contestNumber;
                $.ajax({
                    type: 'GET',
                    url: uri1,
                    success: function(data){
                        location.assign(uri1);
                    }
                });
               }
            })
            .catch((err)=>{
                contestError.textContent = err.message;
            })
            console.log(contestNumber);
        });
    </script>
</body>
</html> 